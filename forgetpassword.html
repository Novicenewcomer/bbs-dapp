<!DOCTYPE html>
<html>
	<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
        <meta name="format-detection" content="telephone=no">
        <title>忘记密码</title>
        <link rel="stylesheet" type="text/css" href="css/public.css"/>
		<link rel="stylesheet" type="text/css" href="css/mpicker.css"/>
		<link rel="stylesheet" type="text/css" href="css/mine.css"/>
    </head>
	<body>
		<div class="mbdivbg">
			<div class="mbdivcon">
				<div class="scrollw_box">
					<div class="fpwordnavbox">
						<ul class="clear">
							<li itype="phone">
								<a href="JavaScript:;">
									手机
								</a>
							</li>
							<li itype="mailbox">
								<a href="JavaScript:;">
									邮箱
								</a>
							</li>
						</ul>
					</div>
					<div class="fpwordwbox">
						<div class="conw phonecon" itype="phone">
							<ul>
								<li>
									<label class="teladlabel" for="phone_teladvalue"><span></span><input id="phone_teladvalue" class="phone_teladvalue" type="text" value="" hidden="" readonly="readonly"/></label>
									<input class="telvalue" type="text" placeholder="请输入手机号码"/>
								</li>
								<li>
									<input class="yzmvalue" type="text" placeholder="请输入验证码"/>
									<div class="yzmbtn"><p>发送验证码</p></div>
								</li>
								<li>
									<input class="privatekeyvalue" type="text" placeholder="钱包私钥"/>
								</li>
								<li>
									<input class="mmvalue" type="password" placeholder="请设置登录密码"/>
									<input class="mmvalue" type="text" placeholder="请设置登录密码"/>
									<div class="mmeyesbtn closeeyes"><svg class="icon" aria-hidden="true"><use xlink:href="#iconyanjing-bi"></use></svg></div>
									<div class="mmeyesbtn openeyes"><svg class="icon" aria-hidden="true"><use xlink:href="#iconyanjing"></use></svg></div>
								</li>
								<li>
									<input class="qrmmvalue" type="password" placeholder="确认登录密码"/>
									<input class="qrmmvalue" type="text" placeholder="确认登录密码"/>
									<div class="qrmmeyesbtn closeeyes"><svg class="icon" aria-hidden="true"><use xlink:href="#iconyanjing-bi"></use></svg></div>
									<div class="qrmmeyesbtn openeyes"><svg class="icon" aria-hidden="true"><use xlink:href="#iconyanjing"></use></svg></div>
								</li>
							</ul>
						</div>
						<div class="conw mailboxcon" itype="mailbox">
							<li>
								<input class="mailvalue" type="text" placeholder="请输入Email邮箱地址"/>
							</li>
							<li>
								<input class="yzmvalue" type="text" placeholder="请输入验证码"/>
								<div class="yzmbtn"><p>发送</p></div>
							</li>
							<li>
								<input class="privatekeyvalue" type="text" placeholder="钱包私钥"/>
							</li>
							<li>
								<input class="mmvalue" type="password" placeholder="请设置登录密码"/>
								<input class="mmvalue" type="text" placeholder="请设置登录密码"/>
								<div class="mmeyesbtn closeeyes"><svg class="icon" aria-hidden="true"><use xlink:href="#iconyanjing-bi"></use></svg></div>
								<div class="mmeyesbtn openeyes"><svg class="icon" aria-hidden="true"><use xlink:href="#iconyanjing"></use></svg></div>
							</li>
							<li>
								<input class="qrmmvalue" type="password" placeholder="确认登录密码"/>
								<input class="qrmmvalue" type="text" placeholder="确认登录密码"/>
								<div class="qrmmeyesbtn closeeyes"><svg class="icon" aria-hidden="true"><use xlink:href="#iconyanjing-bi"></use></svg></div>
								<div class="qrmmeyesbtn openeyes"><svg class="icon" aria-hidden="true"><use xlink:href="#iconyanjing"></use></svg></div>
							</li>
						</div>
					</div>
					<div class="registeredbottombox">
						<a class="forgetpasswordbtn graybtn" href="javascript:;">确定</a>
						<p class="retlandingopagetext"><a href="landing.html">返回登录</a></p>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script src="js/jquery.js"></script>
	<script src="js/public.js"></script>
	<script src="js/mPicker.min.js"></script>
	<script src="js/gt.js"></script>
	<script src="js/forgetpassword.js"></script>
	<script>
		$(".forgetpasswordbtn").on("click",function(){//确定
			if(!registeredfn.btnd){
				return false;
			}
			console.log(registeredfn.thisnavac)//确定类型
			console.log(registeredfn.thisdata)//用户信息
			
		})
	
	var handler = function (captchaObj) {
        captchaObj.onReady(function () {
        }).onSuccess(function () {
            var result = captchaObj.getValidate();
            if (!result) {
                return alert('请完成验证');
            }
            if(registeredfn.thisnavac=="phone"){
            	phone_sendtelyzm(result,function(){
					phone_yzm.init();
				})
            }else if(registeredfn.thisnavac=="mailbox"){
				mail_yzm.init();
            }
        });
        readphoneobj.thisdom.find(".yzmbtn").on("click",function(ev){
			ev.stopPropagation();
			if(!$.trim(registeredfn.thisdata.telnum)){
				operationFailedobj.init("请输入手机号码，不能为空");
				registeredfn.thisdata.telnum = "";
				readphoneobj.thisdom.find(".telvalue").val("");
				registeredfn.readforgetpasswordbtn();
				return false;
			}
			if($(this).attr("disabled")!="disabled"){
				captchaObj.verify();
			}
		})
		$(".mailboxcon .yzmbtn").on("click",function(ev){
			ev.stopPropagation();
			if(!$.trim(registeredfn.thisdata.mail)){
				operationFailedobj.init("请输入Email邮箱地址");
				registeredfn.thisdata.mail = "";
				readmailboxobj.thisdom.find(".mailvalue").val("");
				registeredfn.readforgetpasswordbtn();
				return false;
			}
			if($(this).attr("disabled")!="disabled"){
				captchaObj.verify();
			}
		})
    };
	$.ajax({
        url: "http://www.geetest.com/demo/gt/register-slide?t=" + (new Date()).getTime(), // 加随机数防止缓存
        type: "get",
        dataType: "json",
        success: function (data) {

            // 调用 initGeetest 进行初始化
            // 参数1：配置参数
            // 参数2：回调，回调的第一个参数验证码对象，之后可以使用它调用相应的接口
            initGeetest({
                // 以下 4 个配置参数为必须，不能缺少
                gt: data.gt,
                challenge: data.challenge,
                offline: !data.success, // 表示用户后台检测极验服务器是否宕机
                new_captcha: data.new_captcha, // 用于宕机时表示是新验证码的宕机

                product: "bind", // 产品形式，包括：float，popup
                width: "300px"
                // 更多配置参数说明请参见：http://docs.geetest.com/install/client/web-front/
            }, handler);
        }
    });
	function phone_sendtelyzm(result,fn){//手机确定发送验证码
		console.log(registeredfn.thisdata.telad)
		console.log(registeredfn.thisdata.telnum);
		console.log(result.geetest_challenge,result.geetest_seccode,result.geetest_validate)
		fn();
	}
	function mail_sendtelyzm(result,fn){//邮箱确定发送验证码
		console.log(registeredfn.thisdata.mail)
		console.log(result.geetest_challenge,result.geetest_seccode,result.geetest_validate)
		fn();
	}
	//底部导航
	linkOpenpage.pagebottomnav=function(othis){
		othis.loadHtmlobj({
			csslink:["css/pages/pagebottomnav.css"],
			jssrc:["js/pages/pagebottomnav.js"],
			callbackfn:function(thisobj){
				pagebottomnav.init({container:othis,type:"mine"});
				pagebottomnav.thisdom.load("pagebottomnav.html",function(){
					pagebottomnav.showbox();
					$(".registeredbottombox").css("padding-bottom",parseFloat(pagebottomnav.thisdom.css("height")))
					thisobj.endfn();
					linkOpenpage.readpage();
				})
			}
		})
	};
	$(function(){
		registeredfn.thisnavac = "phone";
		registeredfn.init();
	})
	linkOpenpage.readpage({
		pagearr:["pagebottomnav"],
		othis:$(".mbdivcon")
	});
	var phone_yzm = new yzmTime(readphoneobj.thisdom.find(".yzmbtn"),readphoneobj.thisdom.find(".yzmbtn p"));
	var mail_yzm = new yzmTime(readmailboxobj.thisdom.find('.yzmbtn'),readmailboxobj.thisdom.find('.yzmbtn p'),{inittext : "发送",ctext : "重新发送"});
	
	
</script>
</html>
